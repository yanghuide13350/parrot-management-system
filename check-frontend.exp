#!/usr/bin/expect -f
set timeout 60
set host "103.110.81.83"
set user "root"
set password "rQ24T4MkMViB"

spawn ssh -o StrictHostKeyChecking=no $user@$host
expect "password:"
send "$password\r"
expect "# "

# 检查前端 dist 目录
send "ls -la /var/www/parrot-management-system/parrot-management-system/dist/\r"
expect "# "

# 检查 index.html 是否包含 share 相关代码
send "grep -l share /var/www/parrot-management-system/parrot-management-system/dist/assets/*.js 2>&1 | head -3\r"
expect "# "

# 检查 _redirects 文件
send "cat /var/www/parrot-management-system/parrot-management-system/dist/_redirects 2>&1\r"
expect "# "

# 检查 nginx 配置
send "cat /etc/nginx/sites-enabled/default | head -60\r"
expect "# "

send "exit\r"
expect eof
