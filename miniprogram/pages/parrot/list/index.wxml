<view class="page">
  <view class="search-bar">
    <view class="search-input glass-card">
      <view class="search-icon-wrap">
        <view class="search-circle"></view>
        <view class="search-handle"></view>
      </view>
      <input 
        placeholder="搜索品种或圈号" 
        value="{{keyword}}"
        bindinput="onSearch"
        confirm-type="search"
      />
    </view>
    <view class="filter-btn {{filterCount ? 'has-filter' : ''}}" bindtap="showFilter">
      <text>筛选</text>
      <text wx:if="{{filterCount}}" class="filter-badge">{{filterCount}}</text>
    </view>
  </view>
  
  <scroll-view 
    class="list-container"
    scroll-y
    enhanced
    refresher-enabled
    refresher-triggered="{{refreshing}}"
    bindrefresherrefresh="onRefresh"
    bindscrolltolower="loadMore"
  >
    <view class="waterfall" wx:if="{{list.length}}">
      <view class="waterfall-col">
        <parrot-card 
          wx:for="{{leftList}}" 
          wx:key="id" 
          parrot="{{item}}"
          data-parrot="{{item}}"
          bindtap="goDetail"
        />
      </view>
      <view class="waterfall-col">
        <parrot-card 
          wx:for="{{rightList}}" 
          wx:key="id" 
          parrot="{{item}}"
          data-parrot="{{item}}"
          bindtap="goDetail"
        />
      </view>
    </view>
    <empty-state wx:elif="{{!loading}}" text="暂无鹦鹉" />
    <view class="load-more" wx:if="{{hasMore && list.length}}">加载中...</view>
  </scroll-view>
  
  <view class="fab" bindtap="goAdd">
    <text>+</text>
  </view>
  
  <filter-drawer 
    visible="{{showFilterDrawer}}"
    breeds="{{breeds}}"
    filters="{{filters}}"
    bindclose="hideFilter"
    bindconfirm="onFilterConfirm"
  />
</view>
